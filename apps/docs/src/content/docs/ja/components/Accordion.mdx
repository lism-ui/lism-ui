---
title: 'Accordion'
description: ...
---

import { Divider, Stack, Text, Center, Flex, Icon, Dummy, Accordion, Accordions } from '@lism-ui/astro';
import { Preview, PreviewArea, PreviewTitle, PreviewCode, ImportPackage, IconBadge, PropBadge, Note, Callout } from "~/components";
import { Minus, Plus, X, Question, CaretDoubleDown, EyeClosed, Eyes } from "@phosphor-icons/react";

{/* // import { Accordion } from '@lism-ui/core'; */}

アコーディオン要素を作成できるコンポーネントです。


<Note title='実装方法について' type='info'>
- `details/summary` を採用。
- `grid` の `1fr` を使った transition で "height:100% 問題" を解決。
	{/* - Note: コンテンツ側のpadding は、`__inner` ではなく `__body` につけるように注意が必要です。 */}
</Note>


<Preview>
	<PreviewTitle>Preview</PreviewTitle>
	<PreviewArea p='20'>
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Label>Accordion.Label</Accordion.Label>
				<Accordion.Icon/>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
	</PreviewArea>
	<PreviewCode slot='tab' label='JSX'>
		```jsx
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Label>Accordion.Label</Accordion.Label>
				<Accordion.Icon/>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
		```
	</PreviewCode>
	<PreviewCode slot='tab' label='HTML'>
```html
<details class="d--accordion -p:20">
	<summary class="d--accordion__header l--flex -ai:c">
		<span class="d--accordion__label -fx:1">Accordion.Label</span>
		<span class="d--accordion__icon -d:if">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="1em" height="1em" fill="currentColor" focusable="false" class="l--icon" aria-hidden="true"><path d="M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"></path></svg>
		</span>
	</summary>
	<div class="d--accordion__body l--grid -mbs:20">
		<div class="d--accordion__inner -ov:h">
			<p>Lorem ipsum...</p>
		</div>
	</div>
</details>
```
	</PreviewCode>
</Preview>


## Props

| プロパティ | 説明 | 
|---|---|
| <PropBadge>`<Accordions>`</PropBadge>,<br/><PropBadge>`<Accordion.Root>`</PropBadge><br/>`duration` | <PropBadge type="cssvar">`--acc-duration`</PropBadge> が出力され、トランジションの時間を変更できます。 |
| <PropBadge>`<Accordions>`</PropBadge><br/>`allowMultiple` | <PropBadge type="attr">`data-acc-multiple`</PropBadge> が出力され、複数のアコーディオンを同時に開くことを禁止します。 |
| <PropBadge>`<Accordion.Icon>`</PropBadge><br/>`icon` | 内部で呼び出される`<Icon>` に渡す `icon` を指定できます。ただし、`<Accordion.Icon>`に子要素が配置されている場合は無視されます。 |
| <PropBadge>`<Accordion.Icon>`</PropBadge><br/>`isTrigger` | <PropBadge type="attr">`data-role="trigger"`</PropBadge> `button`タグでの出力となり`[data-role="trigger"]`が付与されます。|



## Import

<ImportPackage component='Accordions, Accordion' />


HTML で使用する場合、jsファイルが必要です。

```html
<script src='...'></script>
```
{/* <script src="index.js" type="module"></script> */}


## Usage

<Preview>
	<PreviewTitle>ラベルのHTMLタグをh3タグにする</PreviewTitle>
	<PreviewArea p='20'>
		<Accordion.Root p='30'>
			<Accordion.Header>
				<Accordion.Label tag='h3' f='inherit'>Accordion.Label</Accordion.Label>
				<Accordion.Icon/>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
	</PreviewArea>
	<PreviewCode slot='tab' label='JSX'>
	```jsx "tag='h3'"
	<Accordion.Root p='20'>
		<Accordion.Header>
			<Accordion.Label tag='h3' f='inherit'>Accordion.Label</Accordion.Label>
			<Accordion.Icon/>
		</Accordion.Header>
		<Accordion.Body mbs='20'>
			<Dummy length='l' />
		</Accordion.Body>
	</Accordion.Root>
	```
	</PreviewCode>
	<PreviewCode slot='tab' label='HTML'>
	```html "h3" "-f:i"
	<details class="d--accordion -p:20">
		<summary class="d--accordion__header l--flex -ai:c">
			<h3 class="d--accordion__label -f:i -fx:1">Accordion.Label</h3>
			...
	```
	</PreviewCode>
</Preview>


<Preview>
	<PreviewTitle>アイコンの位置を逆にする</PreviewTitle>
	<PreviewArea p='20'>
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Icon/>
				<Accordion.Label>Accordion.Label</Accordion.Label>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
	</PreviewArea>
	<PreviewCode>
		```jsx
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Icon/>
				<Accordion.Label>Accordion.Label</Accordion.Label>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
		```
	</PreviewCode>
</Preview>


### アイコンを変更する

`<Accordion.Label>`に指定する`icon`は、内部で`<Icon>`に渡されます。  
デフォルトは`'caret-down'`になっています。

<Preview>
	<PreviewTitle>`'caret-down-fill'`を指定する</PreviewTitle>
	<PreviewArea p='20'>
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Label>Accordion.Label</Accordion.Label>
				<Accordion.Icon icon='caret-down-fill'/>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
	</PreviewArea>
	<PreviewCode>
		```jsx "icon="
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Label>Accordion.Label</Accordion.Label>
				<Accordion.Icon icon='caret-down-fill'/>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
		```
	</PreviewCode>
</Preview>


<Preview>
	<PreviewTitle>外部コンポーネントを指定する</PreviewTitle>
	<PreviewArea p='20'>
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Label>Accordion.Label</Accordion.Label>
				<Accordion.Icon icon={CaretDoubleDown}/>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
	</PreviewArea>
	<PreviewCode>
```jsx "icon="
import { CaretDoubleDown } from "@phosphor-icons/react";

<Accordion.Root p='20'>
	<Accordion.Header>
		<Accordion.Label>Accordion.Label</Accordion.Label>
		<Accordion.Icon icon={CaretDoubleDown}/>
	</Accordion.Header>
	<Accordion.Body mbs='20'>
		<Dummy length='l' />
	</Accordion.Body>
</Accordion.Root>
```
	</PreviewCode>
</Preview>



{/* <Preview>
	<PreviewTitle>直接子要素で`<Icon>`を呼び出す</PreviewTitle>
	<PreviewArea>
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Icon>
					<Icon viewBox='0 0 256 256'>
						<path d="M229.66,141.66l-96,96a8,8,0,0,1-11.32,0l-96-96A8,8,0,0,1,32,128H72V48A16,16,0,0,1,88,32h80a16,16,0,0,1,16,16v80h40a8,8,0,0,1,5.66,13.66Z"></path>
					</Icon>
				</Accordion.Icon>
				<Accordion.Label>Accordion.Label</Accordion.Label>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
	</PreviewArea>
	<PreviewCode>
		```jsx "\<Icon "
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Icon>
					<Icon viewBox='0 0 256 256'>
						<path d="M229.66,141.66l-96,96a8,8,0,0,1-11.32,0l-96-96A8,8,0,0,1,32,128H72V48A16,16,0,0,1,88,32h80a16,16,0,0,1,16,16v80h40a8,8,0,0,1,5.66,13.66Z"></path>
					</Icon>
				</Accordion.Icon>
				<Accordion.Label>Accordion.Label</Accordion.Label>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
		```
	</PreviewCode>
</Preview> */}

#### 開閉時にアイコンを変更する (Opt-in)

追加で少しCSSを加える必要がありますが、開閉時にアイコンを切り替える例も紹介します。

<Preview>
	<PreviewTitle>Example</PreviewTitle>
	<PreviewArea>
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Label>Accordion.Label</Accordion.Label>
				<Accordion.Icon>
					<Icon icon={{as:Plus, weight:'bold'}} />
					<Icon icon={{as:Minus, weight:'bold'}} />
				</Accordion.Icon>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
	</PreviewArea>
	<PreviewCode slot='tab' label='JSX'>
		```jsx "\<Icon "
		<Accordion.Root p='20'>
			<Accordion.Header>
				<Accordion.Label>Accordion.Label</Accordion.Label>
				<Accordion.Icon>
					<Icon icon={{as:Plus, weight:'bold'}} />
					<Icon icon={{as:Minus, weight:'bold'}} />
				</Accordion.Icon>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy length='l' />
			</Accordion.Body>
		</Accordion.Root>
		```
	</PreviewCode>
	<PreviewCode slot='tab' label='CSS'>
```scss
.d--accordion__icon {
	> .l--icon:nth-last-of-type(2) {
		opacity: calc(1 - var(--opened));
	}
	> .l--icon:nth-of-type(2) {
		opacity: calc(0 + var(--opened));
		rotate: calc(180deg - var(--opened) * 180deg);
	}
}
```
	</PreviewCode>
</Preview>


### `<Accordions>`

アコーディオン専用のラッパーコンポーネントです。

<Preview>
	<PreviewTitle>Preview</PreviewTitle>
	<PreviewArea p={30}>
		<Accordions hasDivider bd>
			<Accordion.Root p='20' ov='h'>
				<Accordion.Header>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body mbs='20'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
			<Accordion.Root p='20'>
				<Accordion.Header>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body mbs='20'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
			<Accordion.Root p='20'>
				<Accordion.Header>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body mbs='20'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
		</Accordions>
	</PreviewArea>
	<PreviewCode slot='tab' label='JSX'>
		```jsx
		<Accordions hasDivider bd>
			<Accordion.Root p='20'>
				<Accordion.Header>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body mbs='20'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
			<Accordion.Root p='20'>
				<Accordion.Header>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body mbs='20'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
			<Accordion.Root p='20'>
				<Accordion.Header>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body mbs='20'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
		```
	</PreviewCode>
	<PreviewCode slot='tab' label='HTML'>
```html
<div class="d--accordions l--stack has--divider -bd:">
	<details class="d--accordion -p:20">
		...
	</details>
	<details class="d--accordion -p:20">
		...
	</details>
	<details class="d--accordion -p:20">
		...
	</details>
</div>
```
	</PreviewCode>
</Preview>


#### allowMultiple


`allowMultiple`に`false`を指定すると `[data-acc-multiple="disallow"]`が出力され、複数のアコーディオンを同時に開くことを禁止します。

<Preview>
	<PreviewTitle>Preview</PreviewTitle>
	<PreviewArea p={30}>
		<Accordions hasDivider bdc='base' allowMultiple={false}>
			<Accordion.Root>
				<Accordion.Header p='30' bgc='text' c='base'>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body p='30'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
			<Accordion.Root>
				<Accordion.Header p='30' bgc='text' c='base'>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body p='30'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
			<Accordion.Root>
				<Accordion.Header p='30' bgc='text' c='base'>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body p='30'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
		</Accordions>
	</PreviewArea>
	<PreviewCode slot='tab' label='JSX'>
```jsx "allowMultiple={false}"
<Accordions hasDivider bdc='base' allowMultiple={false}>
	<Accordion.Root>
		<Accordion.Header p='30' bgc='text' c='base'>
			<Accordion.Label>Accordion.Label</Accordion.Label>
			<Accordion.Icon/>
		</Accordion.Header>
		<Accordion.Body p='30'>
			<Dummy length='l' />
		</Accordion.Body>
	</Accordion.Root>
	<Accordion.Root>
		<Accordion.Header p='30' bgc='text' c='base'>
			<Accordion.Label>Accordion.Label</Accordion.Label>
			<Accordion.Icon/>
		</Accordion.Header>
		<Accordion.Body p='30'>
			<Dummy length='l' />
		</Accordion.Body>
	</Accordion.Root>
	...
</Accordions>
```
	</PreviewCode>
	<PreviewCode slot='tab' label='HTML'>
```html "data-acc-multiple=\"disallow\""
<div class="d--accordions l--stack" data-acc-multiple="disallow">
	...
</div>
```
	</PreviewCode>
</Preview>


### 開閉トランジションの時間を変更する

`--acc-duration`でトランジションの秒数を管理します。

`<Accordions>`,`<Accordion>`に`duration`を指定すると、（`--acc-duration`）を出力できます。


<Preview>
	<PreviewTitle>Preview</PreviewTitle>
	<PreviewArea p={30}>
		<Accordions duration='0.4s' g='30'>
			<Accordion.Root bgc='base-2' bxsh='1' bdrs='3'>
				<Accordion.Header p='30'>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body p='30' bd='t' bdc='divider'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
			<Accordion.Root bgc='base-2' bxsh='1' bdrs='3'>
				<Accordion.Header p='30'>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body p='30' bd='t' bdc='divider'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
			<Accordion.Root bgc='base-2' bxsh='1' bdrs='3'>
				<Accordion.Header p='30'>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body  p='30' bd='t' bdc='divider'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
		</Accordions>
	</PreviewArea>
	<PreviewCode slot='tab' label='JSX'>
		```jsx "duration='0.4s'"
		<Accordions duration='0.4s' g='30'>
			<Accordion.Root bgc='base-2' bxsh='1' bdrs='3'>
				<Accordion.Header p='30'>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body p='30' bd='t' bdc='divider'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
			<Accordion.Root bgc='base-2' bxsh='1' bdrs='3'>
				<Accordion.Header p='30'>
					<Accordion.Label>Accordion.Label</Accordion.Label>
					<Accordion.Icon/>
				</Accordion.Header>
				<Accordion.Body p='30' bd='t' bdc='divider'>
					<Dummy length='l' />
				</Accordion.Body>
			</Accordion.Root>
			...
		</Accordions>
		```
	</PreviewCode>
<PreviewCode slot='tab' label='HTML'>
```html "--acc-duration:0.4s"
<div class="d--accordions l--stack -g:30" style="--acc-duration:0.4s">
	...
</div>
```
</PreviewCode>
</Preview>


<Callout type='info'>
CSSで`:root`の`--acc-duration`を上書きすると、デフォルトの開閉速度を変更できます。
</Callout>



### アコーディオントリガーをアイコンのみにする

`<Accordion.Icon>` に `isTrigger` を指定すると、`button`タグでの出力となり`[data-role="trigger"]`が付与されます。  
この時、アコーディオンを開閉するための`click`イベントは `summary`（アコーディオンヘッダー）全体ではなくアイコン部分に対して登録されます。

<IconBadge type='point' /> これにより、**アコーディオンヘッダー内にリンクを置いてもクリックできる**ようになります。

<Preview>
	<PreviewTitle>Preview</PreviewTitle>
	<PreviewArea p='20'>
		<Accordion.Root p='20'>
			<Accordion.Header trigger='icon'>
				<Accordion.Label>Labelテキスト（<a href="#acc-innerlink">ヘルプリンク</a>）</Accordion.Label>
				<Accordion.Icon isTrigger bd bdrs='1' bgc='inherit'/>
			</Accordion.Header>
			<Accordion.Body mbs='20'>
				<Dummy />
			</Accordion.Body>
		</Accordion.Root>
	</PreviewArea>
	<PreviewCode slot='tab' label='JSX'>
		```jsx "trigger='icon'"
		<Accordion.Root p='20'>
			<Accordion.Header trigger='icon'>
				<Accordion.Label>Labelテキスト（<a href="#acc-innerlink">ヘルプリンク</a>）</Accordion.Label>
				<Accordion.Icon isTrigger bd bdrs='1' bgc='inherit'/>
			</Accordion.Header>
			<Accordion.Body mbs='20'>...</Accordion.Body>
		</Accordion.Root>
		```
	</PreviewCode>
	<PreviewCode slot='tab' label='HTML'>
```html "<button" "data-role=\"trigger\""
<details class="d--accordion -p:20">
	<summary class="d--accordion__header l--flex -ai:c">
		<span class="d--accordion__label -fx:1">Labelテキスト（<a href="#acc-innerlink">ヘルプリンク</a></span>
		<button class="d--accordion__icon -d:if" data-role="trigger">
			<svg class="l--icon"...>...</svg>
		</button>
	</summary>
	<div class="d--accordion__body l--grid -mbs:20">
		<div class="d--accordion__inner -ov:h">...</div>
	</div>
</details>
```
	</PreviewCode>
</Preview>


<IconBadge type='warning' /> ただし、Tabキーでのカーソル操作時は、`summary`タグ全体の選択を回避できません。

{/* 
<Note title='Note:' type='note' isFlow='s'>
`<summary>`自体が`toggle`イベントを持つため、`<Accordion.Header>`内のリンク以外のエリアをクリックしてもアコーディオンは開閉します。  
これを防いでアイコンのみだけをクリッカブルにしたい場合は、以下のようにCSSを追加してください。

```css
.d--accordion__header:has([data-role='trigger']) {
	pointer-events: none;
}
```
</Note> */}

