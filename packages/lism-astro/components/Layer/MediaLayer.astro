---
import Layer from './Layer.astro';
import { Media } from '../Lism';
import { Frame } from '../Frame';
import { separateMediaAttrs } from '@loos/lism-core/lib';

const { media = 'img', hover, ...props } = Astro.props || {};

const { mediaAttrs, otherProps } = separateMediaAttrs(props);
---

{
	Astro.slots.has('default') ? (
		<Frame layout={Layer} hover={hover} {...otherProps}>
			<slot />
		</Frame>
	) : (
		<Frame layout={Layer} {...otherProps}>
			<Media as={media} hover={hover} loading='lazy' decoding='async' {...mediaAttrs} />
		</Frame>
	)
}
